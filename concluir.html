<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Concluir</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

<style>
body{
  margin:0;
  background:#05000a;
  color:#fff;
  font-family:Arial;
  text-align:center;
}
#particles{position:fixed;inset:0}
.container{
  position:relative;
  z-index:1;
  padding:50px 20px;
}
h1{
  color:#b66bff;
  text-shadow:0 0 20px #9b4dff;
}
button,a{
  display:block;
  margin:15px auto;
  padding:14px;
  max-width:360px;
  border-radius:10px;
  font-weight:bold;
  text-decoration:none;
  border:none;
}
.visit{
  background:#7b2cff;
  color:#fff;
  box-shadow:0 0 25px #7b2cff;
}
.confirm{
  background:#222;
  color:#aaa;
}
.confirm.active{
  background:#00ff88;
  color:#000;
  box-shadow:0 0 25px #00ff88;
}
#download{
  display:none;
  background:#00ff88;
  color:#000;
}
.progress{
  height:8px;
  background:#222;
  border-radius:5px;
  overflow:hidden;
  margin:20px auto;
  max-width:360px;
}
#bar{
  width:0%;
  height:100%;
  background:#9b4dff;
}
</style>
</head>

<body>
<div id="particles"></div>

<div class="container">
<h1 id="titulo"></h1>

<div class="progress"><div id="bar"></div></div>

<button class="visit" onclick="abrir()">VISITAR</button>
<button id="confirm" class="confirm" disabled onclick="liberar()">✔ JÁ VISITEI</button>
<a id="download" target="_blank">BAIXAR AGORA</a>
</div>

<script>
const p=new URLSearchParams(location.search);
titulo.textContent=p.get("titulo")||"Concluir";
const canal=p.get("canal");
const download=p.get("download");

let t=0;
const min=10;

function abrir(){
  if(!canal)return alert("Link inválido");

  // Abre APP automaticamente
  if(canal.includes("youtube")) location.href="vnd.youtube://"+canal.split("://")[1];
  else if(canal.includes("tiktok")) location.href="tiktok://"+canal.split("://")[1];
  else if(canal.includes("wa.me")||canal.includes("whatsapp")) location.href="whatsapp://send?text="+canal;
  else location.href=canal;

  t=0; bar.style.width="0%";
  confirm.disabled=true; confirm.classList.remove("active");

  const timer=setInterval(()=>{
    t++; bar.style.width=(t/min*100)+"%";
    if(t>=min){
      clearInterval(timer);
      confirm.disabled=false;
      confirm.classList.add("active");
    }
  },1000);
}

function liberar(){
  download.href=download;
  download.style.display="block";
}

particlesJS("particles",{
  particles:{
    number:{value:70},
    color:{value:"#9b4dff"},
    line_linked:{enable:true,color:"#7b2cff"},
    move:{enable:true,speed:2}
  }
});
</script>
</body>
</html>
